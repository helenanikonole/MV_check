(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{187:function(e,t,r){e.exports=r.p+"img/0918d78.png"},198:function(e,t){},199:function(e,t){},200:function(e,t){},205:function(e,t,r){"use strict";r.r(t);var n=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"manifest__wrapper"},[t("div",{staticClass:"text-in-corner"},[this._v("About")]),this._v(" "),t("div",{staticClass:"manifest__github"},[t("a",{attrs:{href:"https://github.com/helenanikonole/MV_check",target:"_blank"}},[t("img",{attrs:{title:"Github repository",src:r(187)}})])])])}],o=(r(50),r(41),r(30),r(16),r(33),r(17),r(24),r(25),r(14),r(7),r(34),r(64),r(22)),c=(r(188),r(192)),l=r(38),d=r(203);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function v(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var _={data:function(){return{image:{base64:null,activeURL:null},isDisclaimer:!0,isRecognized:!1,modal:{show:!1,header:"Default header",text:"Check console output"},logs:[{id:0,template:"- Webcam (recognized by _count_/_models_ models)",count:0,models:1,disabled:!1},{id:1,template:"- Street CCTV (_count_/_models_ models)",count:0,models:0,disabled:!0},{id:2,template:"- Public transport CCTV (_count_/_models_ models)",count:0,models:0,disabled:!0},{id:3,template:"- Security CCTV (_count_/_models_ models)",count:0,models:0,disabled:!0}]}},watch:{logs:{deep:!0,handler:function(e){e.find((function(e){return e.count>0}))&&(this.isRecognized=!0)}}},computed:{preparedLogs:function(){var e,t=[],r=v(this.logs);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(f(f({},n),{},{text:n.template.replace("_count_",n.count).replace("_models_",n.models)}))}}catch(e){r.e(e)}finally{r.f()}return t}},mounted:function(){Promise.all([this.init(),d.f.tinyFaceDetector.loadFromUri("./models"),d.f.faceLandmark68Net.loadFromUri("./models"),d.f.faceRecognitionNet.loadFromUri("./models"),d.f.faceExpressionNet.loadFromUri("./models")]).catch((function(e){console.log(e)}))},methods:f(f({},Object(l.b)({validateImage:"utils/validateImage"})),{},{init:function(){var e=this;return e.showDisclaimer(),new Promise((function(t,r){e.startVideo().then((function(){e.hideDisclaimer()})).catch((function(){return setTimeout((function(){e.openModal("Error","Enable camera to continue.")}),5e3),r()}))}))},showDisclaimer:function(){this.isDisclaimer=!0},hideDisclaimer:function(){this.isDisclaimer=!1},tryAgain:function(){for(var e in this.logs)console.log(this.logs[e]),this.logs[e].count=0;this.isRecognized=!1},resetCounter:function(e){var t=this;t.logs.find((function(r,n){r.id==e&&(t.logs[n].count=0)}))},setCounter:function(e,t){var r=this;r.logs.find((function(n,o){n.id==e&&(r.logs[o].count=t)}))},openModal:function(header,text){this.modal.show=!0,this.modal.header=header||"Default heder",this.modal.text=text||"Check console output"},onPlay:function(){var e=this,t=this.$refs.video,r=this,n=new d.b({inputSize:512,scoreThreshold:.5});d.c(t,n).withFaceLandmarks().withFaceDescriptor().then((function(o){if(o&&r.image.activeURL){var c=r.$refs.referenceImage;d.c(c,n).withFaceLandmarks().withFaceDescriptor().then((function(r){if(r&&"unknown"!=new d.a(o).findBestMatch(r.descriptor)._label){var canvas=e.$refs.overlay,n=d.e(canvas,t,!0);d.d.drawDetections(canvas,d.g(o,n)),e.setCounter(0,1)}}))}setTimeout((function(){e.onPlay()}))}))},startVideo:function(){var e=this,video=e.$refs.video;return new Promise((function(t,r){if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,!navigator.getUserMedia)return r(error);navigator.getUserMedia({video:{}},(function(r){video.srcObject=r,e.$refs.overlay.width=e.$refs.video.offsetWidth,e.$refs.overlay.height=e.$refs.video.offsetHeight,t(r)}),(function(e){return r(e)}))}))},openImageSelector:function(){var input=document.createElement("input"),e=this;input.type="file",input.accept="image/*",input.onchange=function(t){var r=t.target.files[0];e.validateImage(r).then((function(){e.uploadFile(r)})).catch((function(e){console.log(e)}))},input.click()},addFile:function(e){var t=e.dataTransfer.files[0];t&&(this.uploadFile(t),this.unsetDragStyle())},setDragStyle:function(){this.$refs.dropzone.classList.add("dragging")},unsetDragStyle:function(){this.$refs.dropzone.classList.remove("dragging")},uploadFile:function(e){var t=this;Object(c.a)(e).then((function(r){t.image.base64=r,t.image.activeURL=URL.createObjectURL(e)}))},removeImage:function(){this.image.base64=null,this.image.activeURL=null,this.setDragStyle(),this.openImageSelector()}})},y=r(21),component=Object(y.a)(_,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"parent"},[e.modal.show?r("modal",{on:{close:function(t){e.modal.show=!1}}},[r("h3",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.modal.header))]),e._v(" "),r("h4",{attrs:{slot:"body"},slot:"body"},[e._v(e._s(e.modal.text))])]):e._e(),e._v(" "),r("div",{staticClass:"image-preview__wrapper"},[e.image.activeURL?r("div",{staticClass:"image-preview__image"},[r("div",{staticClass:"text-in-corner",on:{click:e.removeImage}},[e._v("Select new image")]),e._v(" "),r("img",{ref:"referenceImage",attrs:{src:e.image.activeURL}})]):e._e(),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.image.activeURL,expression:"!image.activeURL"}],ref:"dropzone",class:["image-preview__dropzone"],on:{drop:function(t){return t.preventDefault(),e.addFile(t)},dragover:function(t){return t.preventDefault(),e.setDragStyle(t)},dragleave:e.unsetDragStyle,dragend:e.unsetDragStyle,click:e.openImageSelector}},[r("div",{staticClass:"text-in-corner"},[e._v("Upload image")])])]),e._v(" "),r("div",{staticClass:"webcam__wrapper"},[r("div",{staticClass:"text-in-corner z-index-10"},[e._v("Your webcam")]),e._v(" "),r("div",{staticClass:"webcam__video-wrapper"},[r("transition",{attrs:{name:"disclaimer"}},[e.isDisclaimer?r("div",{staticClass:"webcam__disclaimer-wrapper"},[r("div",{staticClass:"webcam__disclaimer"},[r("h2",[e._v("Disclaimer")]),e._v(" "),r("h3",[e._v("VerifyAI accesses your device camera and uses AI algorithms to analyse your video stream. VerifyAI DO NOT transmit, store or share your data as all AI computations are carried out on your local machine ONLY. We respect your privacy.")])])]):e._e()]),e._v(" "),r("transition",{attrs:{name:"recongnized"}},[e.isRecognized?r("div",{staticClass:"webcam__recongnized-wrapper"},[r("div",{staticClass:"webcam__recongnized"},[r("h2",[e._v("You have been recongnized")]),e._v(" "),r("div",[r("button",{staticClass:"webcam__try-again",on:{click:e.tryAgain}},[e._v("Try again")])])])]):e._e()]),e._v(" "),r("video",{directives:[{name:"show",rawName:"v-show",value:!e.isDisclaimer,expression:"!isDisclaimer"}],ref:"video",staticClass:"webcam__video",attrs:{id:"inputVideo",autoplay:""},on:{loadedmetadata:function(t){return e.onPlay()}}}),e._v(" "),r("canvas",{directives:[{name:"show",rawName:"v-show",value:!e.isDisclaimer,expression:"!isDisclaimer"}],ref:"overlay",staticClass:"webcam__canvas"})],1)]),e._v(" "),r("div",{staticClass:"system-logs__wrapper"},[r("div",{staticClass:"text-in-corner"},[e._v("System logs")]),e._v(" "),r("div",{staticClass:"system-logs__list"},e._l(e.preparedLogs,(function(t){return r("div",[r("span",{class:[t.disabled?"system-logs__log_disabled":"","system-logs__log"]},[e._v(e._s(t.text))])])})),0)]),e._v(" "),e._m(0)],1)}),n,!1,null,null,null);t.default=component.exports}}]);